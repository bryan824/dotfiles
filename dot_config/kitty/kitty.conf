# See https://sw.kovidgoyal.net/kitty/conf.html
font_family FantasqueSansM Nerd Font Mono
font_size 16


inactive_tab_font_style normal
active_tab_font_style bold
adjust_column_width 0
adjust_line_height 0
allow_remote_control yes
click_interval -1.0
copy_on_select no
cursor_trail 5
cursor_trail_decay 0.1 0.4
cursor_blink_interval 0.5
cursor_shape block
cursor_stop_blinking_after 15.0
# cursor_text_color #363944
disable_ligatures cursor
editor nvim
enable_audio_bell yes
enabled_layouts splits,stack
hide_window_decorations titlebar-only
initial_window_height 400
initial_window_width 640

# Performance tuning
repaint_delay 10
input_delay 3
sync_to_monitor yes

kitty_mod cmd
macos_option_as_alt yes
# https://github.com/mrjones2014/smart-splits.nvim#kitty
macos_option_as_alt both
# macos_titlebar_color background
mouse_hide_wait 3.0
open_url_modifiers cmd
open_url_with default
remember_window_size no

scrollback_lines 10000
scrollback_pager less +G -R
select_by_word_characters :@-./_~?&=%+#
tab_activity_symbol 
tab_bar_edge top
tab_bar_style powerline

# with Shell integration enabled, using negative values means windows sitting at a shell prompt are not counted,
# only windows where some command is currently running.
# see https://sw.kovidgoyal.net/kitty/conf/#opt-kitty.confirm_os_window_close
confirm_os_window_close 0

# emoji from https://emojipedia.org/regional-indicator-symbol-letter-z/
# title parse see https://github.com/kovidgoyal/kitty/blob/587f44ad4eb7fe545b0e580168cf0c32117b87c7/kitty/tab_bar.py#L175
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}:{'🇿' if layout_name == 'stack' and num_windows > 1 else ''}{title}"


#: When background image is scaled, whether linear interpolation
#: should be used.

background_opacity 0.85
background_blur 64
dynamic_background_opacity yes

allow_hyperlinks yes
show_hyperlink_targets yes

# term xterm-kitty
# 如果遇到 ssh 错误再换回来
term xterm-256color

url_style curly
visual_bell_duration 0.0
wheel_scroll_multiplier 5.0
window_border_width 1
window_margin_width 1
window_padding_width 1

# TODO: 因为这个 zsh 会自动上屏，复现：点击鼠标后马上输入文字
# https://github.com/kovidgoyal/kitty/issues/4530
# shell_integration disabled
shell_integration enabled


startup_session launch.conf
map super+t combine : send_key ctrl+g : send_key t : send_key n


map super+r load_config_file
map super+1 goto_tab 1
map super+2 goto_tab 2
map super+3 goto_tab 3
map super+4 goto_tab 4
map super+5 goto_tab 5
map super+6 goto_tab 6
map super+7 goto_tab 7
map super+8 goto_tab 8
map super+9 goto_tab 9

box_drawing_scale 0.001, 1, 1.5, 2

# Clipboard
map super+v paste_from_clipboard
map ctrl+shift+s paste_from_selection
map super+c copy_to_clipboard
map shift+insert paste_from_selection

# Scrolling
map ctrl+shift+up scroll_line_up
map ctrl+shift+down scroll_line_down
map ctrl+shift+k scroll_line_up
map ctrl+shift+j scroll_line_down
map ctrl+shift+page_up scroll_page_up
map ctrl+shift+page_down scroll_page_down
map ctrl+shift+home scroll_home
map ctrl+shift+end scroll_end
map ctrl+shift+h show_scrollback

# Window management
map kitty_mod+- launch --location=hsplit --cwd=current
map kitty_mod+\ launch --location=vsplit --cwd=current
map super+n new_os_window
map super+w close_window
map ctrl+shift+enter new_window
map ctrl+shift+] next_window
map ctrl+shift+[ previous_window

map shift+up move_window up
map shift+left move_window left
map shift+right move_window right
map shift+down move_window down

map ctrl+left neighboring_window left
map ctrl+right neighboring_window right
map ctrl+up neighboring_window up
map ctrl+down neighboring_window down

# Miscellaneous
# map ctrl+shift+up increase_font_size
# map ctrl+shift+down decrease_font_size
# map ctrl+shift+backspace restore_font_size


map ctrl+shift+left resize_window narrower
map ctrl+shift+right resize_window wider
map ctrl+shift+up resize_window taller
map ctrl+shift+down resize_window shorter 3
# reset all windows in the tab to default sizes
map ctrl+shift+0 resize_window reset

# zoom toggle https://sw.kovidgoyal.net/kitty/kittens/custom/#using-kittens-to-script-kitty-without-any-terminal-ui
map kitty_mod+z kitten zoom_toggle.py
# https://sw.kovidgoyal.net/kitty/actions/#action-toggle_layout
#map ctrl+a>z toggle_layout stack

# Open a currently visible URL using the keyboard. The program used to open the
# URL is specified in open_url_with.
map kitty_mod+o run_kitten text hints

# Select a path/filename and insert it into the terminal. Useful, for instance to
# run git commands on a filename output from a previous git command.
map kitty_mod+p>f run_kitten text hints --type path --program -

# Select a path/filename and open it with the default open program.
map kitty_mod+p>shift+f run_kitten text hints --type path

# Select a line of text and insert it into the terminal. Use for the
# output of things like: ls -1
map kitty_mod+p>l run_kitten text hints --type line --program -

# Select words and insert into terminal.
map kitty_mod+p>w run_kitten text hints --type word --program -

# Select OSC hyperlink
map ctrl+shift+p>y kitten hints --type hyperlink


macos_quit_when_last_window_closed yes

# startup_session sessions/default

# BEGIN_KITTY_THEME
# Catppuccin-Mocha
include current-theme.conf
# END_KITTY_THEME

